# 2026-02-12 â€” Bloomie Control UI Reskin Phase 1 Complete

## Session Summary
Conducted full Phase 1 audit of OpenClaw Control UI system architecture. Focused on CSS, theme mechanism, and persistence strategy for Bloomie branding.

## Critical Findings

### 1. CSS Architecture is Fully Themeable âœ…
- **67 custom properties** defined in `/openclaw/ui/src/styles/base.css`
- Two theme contexts: `:root` (dark default) and `:root[data-theme="light"]`
- All colors, shadows, timings, radii defined as CSS vars
- Bloomie colors can override via custom property overrides

### 2. Theme System: `data-theme` Attribute
- Set on `<html>` element by TypeScript in `app-settings.ts:275`
- JavaScript: `root.dataset.theme = resolved`
- Triggers CSS View Transitions API with circular reveal animation from click point
- Clean, modern implementation

### 3. CRITICAL: UI Rebuilt on Every Restart ðŸš¨
- Gateway calls `ensureControlUiAssetsBuilt()` during startup
- Source: `/openclaw/ui/src/` â†’ built via Vite â†’ output to `/openclaw/dist/control-ui/`
- **Custom CSS WILL BE WIPED** on restart unless we persist before build
- Current `/data/start.sh` has backup restore logic, but NO BACKUP exists yet

### 4. Persistence Mechanism in Place (Partially)
- `/data/start.sh` already has backup restore pattern:
  ```bash
  if [ -d "/openclaw/dist/control-ui.backup" ]; then
      rm -rf /openclaw/dist/control-ui
      cp -r /openclaw/dist/control-ui.backup /openclaw/dist/control-ui
  ```
- **But**: No backup created yet; need to create initial backup
- **Solution**: Copy original UI â†’ `.backup/`, then add Bloomie overrides in start.sh AFTER restore

### 5. Brand Name "OpenClaw"
- **85 occurrences** in TypeScript files
- Main class: `OpenClawApp` (app.ts:106)
- Class names stay; only visual rebranding via CSS/colors feasible
- HTML alt text appears in app-render.ts:137

## Phase 2 Plan
1. Create `/openclaw/dist/control-ui.backup/` from current dist
2. Build `bloomie-overrides.css` with Bloomie color palette
3. Update `start.sh` to copy overrides AFTER backup restore
4. Test: Verify CSS persists across Gateway restart

## Phase 1 Deliverable
- **File**: `/data/workspace/PHASE_1_SYSTEM_AUDIT.md` (full technical report with all 67 CSS vars listed)
- Ready for Phase 2 implementation

## Next Session
Pick up at Phase 2: Create backup + build Bloomie overrides
